name: Bootstrap Labels
on:
  workflow_dispatch:
jobs:
  create-labels:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const labels = {
              backend: {color: '1d76db', description: 'Backend changes'},
              perf: {color: '5319e7', description: 'Performance / load tests'},
              ci: {color: '0e8a16', description: 'CI/CD workflows'},
              docs: {color: 'd4c5f9', description: 'Documentation updates'},
              observability: {color: 'fbca04', description: 'Grafana/Prometheus/metrics'},
            };
            for (const [name, cfg] of Object.entries(labels)) {
              try {
                await github.rest.issues.createLabel({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  name,
                  color: cfg.color,
                  description: cfg.description
                });
                core.info(`Created label ${name}`);
              } catch (e) {
                core.info(`Label ${name} exists or failed: ${e.message}`);
              }
            }
